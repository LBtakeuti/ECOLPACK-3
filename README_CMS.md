# エコロパックCMS 使用ガイド

## 概要
このCMSは、エコロパックのウェブサイトコンテンツを管理するためのシンプルな管理システムです。

## 主な機能
- ニュース記事の管理（作成・編集・削除・公開管理）
- 各ページの画像管理（アップロード・削除）
- セキュアなログイン認証

## 初回セットアップ

### 1. 環境変数の設定
```bash
cp .env.local.example .env.local
```
`.env.local` ファイルを編集し、本番環境用の設定に変更してください。

### 2. 依存関係のインストール
```bash
npm install
```

### 3. セットアップスクリプトの実行
```bash
npm run setup
```
このスクリプトで以下が実行されます：
- データベースの初期化
- 管理者アカウントの作成
- サンプルデータの作成（オプション）

### 4. 開発サーバーの起動
```bash
npm run dev
```

### 5. CMSへのアクセス
ブラウザで `http://localhost:3000/admin` にアクセスしてください。

## ログイン情報
- **初期ユーザー名**: admin
- **初期パスワード**: admin123

⚠️ **重要**: 本番環境では必ずパスワードを変更してください。

## 使用方法

### ニュース管理
1. ダッシュボードから「ニュース管理」をクリック
2. 「新規作成」ボタンで新しい記事を作成
3. タイトル、本文、公開ステータス、公開日を設定
4. 「作成」または「更新」ボタンで保存

### 画像管理
1. ダッシュボードから「画像管理」をクリック
2. ページを選択（トップページ、会社概要など）
3. 各画像スロットで画像をアップロード
4. 既存画像は「削除」ボタンで削除可能

#### 管理可能なページと画像
- **トップページ**: hero, banner, gallery1-3
- **会社概要**: hero, banner, gallery1-3
- **サービス紹介**: hero, banner, gallery1-3
- **お問い合わせ**: hero, banner

## セキュリティ設定

### パスワードの変更方法
現在のバージョンでは、パスワード変更はデータベースを直接操作する必要があります。
将来のアップデートで管理画面から変更できるようになる予定です。

### 画像アップロードの制限
- **対応形式**: JPEG, PNG, GIF, WebP
- **最大サイズ**: 5MB

## ディレクトリ構造
```
ecolopack-website/
├── app/
│   ├── admin/          # 管理画面
│   │   ├── login/      # ログインページ
│   │   ├── news/       # ニュース管理
│   │   └── images/     # 画像管理
│   └── api/            # APIエンドポイント
├── lib/
│   ├── db/            # データベース関連
│   └── session.ts     # セッション管理
├── public/
│   └── uploads/       # アップロード画像保存先
└── scripts/
    └── setup.ts       # セットアップスクリプト
```

## トラブルシューティング

### ログインできない場合
1. セットアップスクリプトを再実行
2. `.env.local` のSESSION_PASSWORDが正しく設定されているか確認

### 画像がアップロードできない場合
1. `public/uploads` ディレクトリの書き込み権限を確認
2. ファイルサイズが5MB以下か確認
3. 対応している画像形式か確認

### データベースエラーが発生する場合
1. `cms.db` ファイルの権限を確認
2. 必要に応じてデータベースを削除して再セットアップ

## 本番環境での注意事項
1. **必ず** `.env.local` のSESSION_PASSWORDを変更
2. 初期パスワードを変更
3. HTTPSを使用
4. 定期的なバックアップを実施
5. アップロードディレクトリのバックアップも忘れずに

## サポート
問題が発生した場合は、開発チームにお問い合わせください。